---

- include: regenerate.yml
  when:
    ssh_host_key_state is defined
    and ssh_host_key_state == 'regenerated'

- include: scan.yml
  when:
    ssh_host_key_state is defined
    and ssh_host_key_state == 'scanned'

- include: setup.yml
  when:
    ssh_host_key_state is defined
    and ssh_host_key_state == 'setup'

- include: fetch.yml
  when:
    not ssh_host_key_state is defined
    or ( ssh_host_key_state == 'fetched'
    and ssh_host_key_state == 'regenerated' )

- include: save.yml
